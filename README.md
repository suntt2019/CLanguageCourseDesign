# CLanguageCourseDesign C语言课程设计

## 游戏整体构想
仿制宝开(PopCap)2004年开放的小游戏[《祖玛》](https://baike.baidu.com/item/%E7%A5%96%E7%8E%9B/132172)。


### 游戏规则
  * 主要规则
    * 游戏开始时，轨道上出现一串颜色随机生成的球列，球列会不断前进，其抵达轨道终点时游戏失败

    * 玩家可以用鼠标控制祖玛射球方向，通过点击将祖玛口中的球射出，插入不断向前移动的球列中

    * 由于插入球导致的，`三个及以上连续的同色球` 会相消，并使玩家得分，连续同色球越多增加分数越多

    * 所有球都被消除时，玩家取得胜利

  * 补充说明
    * 玩家可以看到 祖玛口中的球 和 下一个进入祖玛口中的球 的颜色。

    * 玩家获胜时，额外获得点数等于 `球列消失点到终点距离` 的分数。  



### 功能设计
  * 核心游戏部分
    * 祖玛
      * 显示接下来要发射两球的颜色
      * 鼠标移动时：转动，发射方向始终指向鼠标
      * 鼠标点击时：生成 `飞出球` ，随机产生新球颜色，新球替旧球
    * 球列
      * 持续按轨道前进
      * 随机生成（给定球数）
      * 有球插入时：链表插入，检查消除
      * 检测消除时：检查有无 `三个以上同色球` 相连，若有则链表删除，增加分数，再次检测消除
    * 飞出球
      * 持续直线移动
      * 持续监测与球列各球距离，`d<=2R` 则插入球列

  * 周边辅助功能
    * 菜单
      * 开始菜单：随机游戏、载入地图、选项、退出
      * 载入地图菜单：路径输入框、提示栏、确认键
      * 选项菜单：分辨率、是否全屏、音量调整
    * 保存地图
      * 保存背景图片
      * 保存轨道路径

  * 可选拓展功能
    <br>
     \* 该部分功能为完成以上两部分功能后，若还有时间精力，丰富拓展游戏的可选功能
    * 路径编辑器
      * 基础版：可以手动调整参数，生成路径
      * 提升版：程序自动计算位置和一阶导，保证路径C1连续


### 程序设计思路-核心游戏部分
  * 数据结构
    * 球列
      * 首位置(int*1)：第一个球在轨道上的位置
      * 双向链表(int链表*1)：储存每个球颜色
    * 飞出球
      * 飞出球数组(飞出球数组*1)：存储所有飞出球数据
      * 结构体 飞出球：包含球飞行方向与x轴夹角、球当前坐标、颜色
    * 轨道
      * 位置点(double数组*2)：用位置点的方式存储轨道路径
      * 轨道函数参数(int数组*1)：记录轨道函数的几个重要参数来实现不同的轨道函数
    * ...







